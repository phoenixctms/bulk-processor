function initPrimeUI(a){a.trialsPerPage=4;a.trialsPerRow=2;$("#trials").puidatagrid({header:a.trialsGridHeader,paginator:{rows:a.trialsPerPage,page:+a.trialPage},lazy:true,columns:a.trialsPerRow,datasource:function(d,c,b){$.ajax({url:a.uriBase+"/trials",data:{rows:c.rows,first:c.first},context:this,success:function(e){if(this.options.paginator){this.options.paginator.totalRecords=e.paginator.total_count}d.call(this,e.rows);if(b!=null){b(false)}hideWaitDlg()}})},content:function(h){var d=(a.trial!=null&&a.trial.id==h.id);if(a.trial!=null&&a.inquiryTrial!=null&&a.trial._activeInquiryCount==0&&a.trial.signupInquiries){d=false}var e=(a.probandListEntryIdMap[h.id]!=null);a.trialStatusVar={trial:h};var c=$('<div class="ui-grid"/>');var k=$('<div class="ui-grid-row"/>');var i=h.id+"_signup_description";k.append($('<div class="ui-grid-col-12 ui-widget ui-widget-content ui-corner-all '+(d?"ui-shadow ":"")+'ctsms-signup-description"/>').append(createIframe(i,h.signupDescription)));c.append(k);k=$('<div class="ui-grid-row"/>');var j=(a.inquiryTrial!=null&&h._activeInquiryCount==0&&h.signupInquiries)?a.inquiryTrial:h;if(j._activeInquiryCount>0){var g=$('<div id="trial_'+h.id+'_pbar"/>').puiprogressbar({labelTemplate:sprintf(a.inquiriesPbarTemplate,+j._savedInquiryCount,+j._activeInquiryCount),value:Math.round((j._savedInquiryCount/j._activeInquiryCount)*100)});k.append($('<div class="ui-grid-col-5 ctsms-pbar-cell"/>').append(g))}else{k.append($('<div class="ui-grid-col-5 ctsms-pbar-cell"/>'))}var f=$('<button name="trial" type="submit" value="'+h.id+'">'+(j._activeInquiryCount>0?a.openInquiriesBtnLabel:a.signupBtnLabel)+"</button>").puibutton({icon:(j._activeInquiryCount>0?"fa-caret-right":"fa-user-plus"),iconPos:(j._activeInquiryCount>0?"right":"left")});if(e&&j._activeInquiryCount==0){f.puibutton("disable")}k.append($('<div class="ui-grid-col-7" style="text-align:right;"/>').append(f));c.append(k);var b=$('<div title="'+h.name+'"/>').puipanel();b.append(c);return b},initContent:function(b){var c=a.trialStatusVar.trial;var d=c.id+"_signup_description";initIframe(d,c.signupDescription)}});$("#messages").puimessages();if(a.apiError!=null){setMessages("warn",a.apiError)}$("#done_btn").puibutton({icon:"fa-angle-double-right",iconPos:"right"});$("#form").submit(function(){return _sanitizeForm(a)})}function _sanitizeForm(a){showWaitDlg();return true};