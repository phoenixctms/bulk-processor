function initPrimeUI(a){a.sitesVisible=3;$("#images").puigalleria({showCaption:false,showFilmstrip:false,panelWidth:"100%",panelWidth:"20%",transitionInterval:10000});$("#sites").puicarousel({headerText:a.trialSitesHeader,datasource:a.siteOptions,autoplayInterval:0,effectDuration:1000,easing:"easeInOutSine",navigate:function(b,c){$("#sites").puicarousel("stopAutoplay")},numVisible:a.sitesVisible,itemContent:function(b){a.siteStatusVar={site:b};var f=$('<div class="ctsms-site-item"/>');var e=$('<div class="ui-grid"/>');var g=$('<div class="ui-grid-row"/>');g.append($('<div class="ui-grid-col-5"/>').append($('<div class="ctsms-site-label"/>').append($("<span />").append(document.createTextNode(b.label)))));var d=$('<button name="site" type="submit" value="'+b.site+'">'+a.selectSiteBtnLabel+"</button>").puibutton({icon:"fa-caret-right",iconPos:"right"});if(!b.register||a.probandCreated&&b.departmentId!=a.probandDepartmentId){d.puibutton("disable")}g.append($('<div class="ui-grid-col-7" style="text-align:right;"/>').append(d));e.append(g);g=$('<div class="ui-grid-row"/>');var h=b.site+"_site_description";g.append($('<div class="ui-grid-col-12 ui-widget ui-widget-content ui-corner-all '+(b.selected?"ui-shadow ":"")+'ctsms-site-description"/>').append(createIframe(h,b.description)));e.append(g);var c=b.site+"_map";g=$('<div class="ui-grid-row"/>');g.append($('<div class="ui-grid-col-12"/>').append('<div class="'+(b.showMap?"map":"map-hidden")+'" id="'+c+'"/>'));e.append(g);f.append(e);return f},initContent:function(c){var b=a.siteStatusVar.site;var d=b.site+"_site_description";initIframe(d,b.description);initSiteLocationMap(b)}});$("#messages").puimessages();if(a.apiError!=null){setMessages("warn",a.apiError)}$("#form").submit(function(){return _sanitizeForm(a)})}function _sanitizeForm(a){showWaitDlg();return true}function initSiteLocationMap(c){if(c.showMap){var d=c.site+"_map";var b={lat:parseFloat(c.latitude),lng:parseFloat(c.longitude)};var e=new google.maps.Map(document.getElementById(d),{zoom:16,mapTypeControl:false,center:b,streetViewControl:false,mapTypeId:google.maps.MapTypeId.ROADMAP});var a=new google.maps.Marker({position:b,map:e})}};