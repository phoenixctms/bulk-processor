var LocationDistance=LocationDistance||{};(function(c){var n=null;var h=null;var d=null;var j=false;var i=null;var o=null;var p=0;var m={coords:{latitude:DEFAULT_GEOLOCATION_LATITUDE,longitude:DEFAULT_GEOLOCATION_LONGITUDE}};function l(q){j=true;if(q){i=q;var r=[].slice.call(arguments);r.shift();o=r}if(ENABLE_GEOLOCATION_SERVICES&&!FORCE_DEFAULT_GEOLOCATION){if("geolocation" in navigator){navigator.geolocation.getCurrentPosition(g,function(s){if(p>=1){switch(error.code){case error.PERMISSION_DENIED:console.log("User denied the request for Geolocation.");break;case error.POSITION_UNAVAILABLE:console.log("Location information is unavailable.");break;case error.TIMEOUT:console.log("The request to get user location timed out.");break;case error.UNKNOWN_ERROR:console.log("An unknown error occurred.");break}}g(m)})}else{if(p>=1){console.log("navigator.geolocation not supported")}g(m)}}else{g(m)}}function g(r){h=null;c.currentLocation=null;c.currentStreetAddresses=null;c.currentLocality=null;c.currentSubLocality=null;c.currentPostalCode=null;if(ENABLE_GEOLOCATION_SERVICES&&r!=null){h=new google.maps.LatLng(r.coords.latitude,r.coords.longitude);c.currentLocation=h;if(d==null){try{d=new google.maps.Geocoder()}catch(q){if(p>=1){console.log(q)}}}if(d!=null){d.geocode({latLng:h},function(t,s){if(p>=1){console.log("geocoder.geocode response: "+s)}if(s==google.maps.GeocoderStatus.OK){c.currentLocationAddresses=t;c.currentStreetAddresses=b(f(t,"street_address"));c.currentLocality=b(f(t,"locality"));c.currentSubLocality=b(f(t,"sublocality"));c.currentPostalCode=b(f(t,"postal_code"))}if(i){i.apply(this,o)}})}else{if(i){return i.apply(this,o)}}}else{if(i){return i.apply(this,o)}}}function k(s,t){var q=[];if(s&&_testFunction(t)){for(var r=0;r<s.length;r++){if(t(s[r])){q.push(s[r])}}}return q}function b(q){if(q&&q.length>0){return q[0].formatted_address}return"?"}function f(r,q){return k(r,function(s){var t=s.types.length;while(t--){if(s.types[t]===q){return true}}return false})}function e(w,r,q,v,u){if(!j){l(e,w,r,q,v,u)}else{if(w==null&&h!=null){w=h}if(r==null&&h!=null){r=h}if(w!=null&&r!=null){var s=null;try{s={origin:w,destination:r,travelMode:google.maps.DirectionsTravelMode.DRIVING};if(n==null){n=new google.maps.DirectionsService()}}catch(t){if(p>=1){console.log(t)}}if(s!=null&&n!=null){n.route(s,function(y,x){if(p>=1){console.log("directionsService.route response: "+x)}if(x==google.maps.DirectionsStatus.OK){q(y.routes[0].legs[0].distance.value,v,u)}else{q(null,v,u)}})}else{q(null,v,u)}}else{q(null,v,u)}}}function a(v,u,t){var s=_getElement(u);if(s!=null){var r="";if(v!=null){r=sprintf(t,v/1000)}var q=s.contents()[0];if(typeof q.textContent!=="undefined"){q.textContent=r}else{q.innerText=r}}}c.findCurrentLocation=l;c.filterAddressByType=f;c.calcRouteDistance=e;c.printLocationDistance=a;if(p>=1){console.log("location utilities loaded")}})(window.LocationDistance);